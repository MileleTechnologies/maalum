<!DOCTYPE html>
<html>

<head>
<!-- Compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<style>
.ripe1{
   width: 70%;
   margin-right: 15%;
   }
   .input-field .prefix{
    color: rgb(59, 56, 53) !important;
   }
</style>
<body>
    <div class="container" style="background-color: rgb(252 252 252); padding: 2%;">
    <section>
        <div class="center">
            <img src="maalum.png" alt="HTML5 Icon" width="" height="">
        </div>
        <section id="maalum-waiver" aria-labelledby="maalum-waiver-title">
            <h3 id="maalum-waiver-title" class="center" style="text-decoration: underline;">Maalum Natural Swimming Pool</h3>
            <h4 class="center" style="text-decoration: underline;">Terms & Conditions</h4>
        
            <p class="center">
                In consideration for being allowed to access the Maalum Natural Swimming Pool and its facilities,
                the sufficiency of which is hereby acknowledged:
            </p>
        
            <ul style="margin-left: 10%;">
                <li>1. In order to preserve the natural resource and in the interests of hygiene, swimmers must visit the toilet
                    and shower before entering the water.</li>
                <li>2. No use of sun creams, chemical products or insect repellents before swimming.</li>
                <li>3. No diving from above the cave area if so, management will hold no responsibility.</li>
                <li>4. No food is allowed on-premises.</li>
                <li>4. Children under 15 must be accompanied by an adult for supervision and they must sign this form on their
                    behalf.</li>
                <li>6. Management hold no liability for any loss or damage for personal items, or any injuries (minor or major).
                </li>
                <li>7. All rubbish must be disposed of in allocated bins.</li>
                <li>8. Please be aware there is no lifeguard enter pool at your own risk.</li>
                <li>9. No drones are allowed on-premises unless previously notified when booking.</li>
                <li>10. The duration of your slot is 1h30 inside the cave area.</li>
                <li>11. Shouting or making loud noise inside the cave is strictly prohibited.</li>
            </ul>
        
            <p class="center">
                All visitors of Maalum are requested to treat the facilities with respect and as intended.
                We kindly ask you to report any observed defect and any accidents immediately.
            </p>
        
            

        </section>
    </section>
    <div class="row ripe1">
        <form class="row" action="send.php" method="post" autocomplete="off">
            <label class="center">
                <input type="checkbox" class="filled-in" required>
                <span class="blue-text">I have read and understood the terms mentioned above, and I am aware that by signing this
                    form I agree to abide
                    by the rules.</span>
            </label>
            <div class="row">
                <div class="input-field col s12 m6">
                    <i class="material-icons prefix">book</i>
                    <input id="bookname" name="bookname" type="text" class="validate" required>
                    <label for="bookname">Booking Name</label>
                </div>
            
                <div class="input-field col s12 m6" id="supervisor-container">
                    <i class="material-icons prefix">account_circle</i>
                    <input id="Supervissor-1" name="Supervissor[]" type="text" class="validate" required>
                    <label for="Supervissor-1">Supervisor Name</label>
                </div>
            </div>
            
            <!-- Plus button to add more supervisors
            <div class="row">
                <div class="col s12">
                    <button type="button" id="addSupervisor" class="btn green" style="border-radius: 15px;">
                        <i class="material-icons left">add</i> Add Supervisor
                    </button>
                </div>
            </div> -->

            <div class="row">
                <div class="input-field col s12 m6">
                    <i class="material-icons prefix">email</i>
                    <input id="email" name="email" type="email" class="validate">
                    <label for="email">Email Address</label>
                </div>
                <div class="input-field col s12 m6">
                    <i class="material-icons prefix">phone</i>
                    <input id="telephone" name="telephone" type="tel" class="validate">
                    <label for="telephone">Telephone</label>
                </div>
                <!-- error message -->
                <p id="contact-error" style="color: red; display: none; text-align: center; margin-top: 5px;">
                    Please provide at least an Email or a Telephone number.
                </p>
            </div>
            <div class="" style="border: 3px solid black; border-radius: 15px; width: 70%; margin-left: 15%; padding-bottom:10px;">
                <!-- Error message placeholder -->
                <p id="signature-error" style="color: red; text-align: center; display: none; margin: 5px 0;">
                    Please provide a signature before submitting.
                </p>
            
                <canvas id="signature-pad" class="center" style="width: 100%;"></canvas>
                <div class="btns center" style="padding-top: 5px;">
                    <button type="button" class="clear btn red" onclick="clearPad()" style="border-radius: 15px;">Clear</button>
                </div>
                <input type="hidden" name="signature" id="signature">
            </div>

            <div class="center" style="padding-top: 10px;">
                <button class="btn waves-effect waves-light" type="submit" name="action" style="border-radius: 15px;" >Submit
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </form>
        
    </div>

    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>
                <script>
                    let canvas = document.getElementById('signature-pad');
                    let ctx = canvas.getContext('2d');
                    let drawing = false;

                    // Adjust canvas resolution for crisp drawing
                    function resizeCanvas() {
                        let ratio = window.devicePixelRatio || 1;
                        canvas.width = canvas.offsetWidth * ratio;
                        canvas.height = canvas.offsetHeight * ratio;
                        ctx.scale(ratio, ratio);
                    }
                    resizeCanvas();
                    window.addEventListener("resize", resizeCanvas);

                    function startDraw(x, y) {
                        drawing = true;
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                    }

                    function drawLine(x, y) {
                        if (!drawing) return;
                        ctx.lineWidth = 2;
                        ctx.lineCap = "round";
                        ctx.strokeStyle = "black";
                        ctx.lineTo(x, y);
                        ctx.stroke();
                        ctx.moveTo(x, y);
                    }

                    function stopDraw() {
                        drawing = false;
                        ctx.beginPath(); // reset path to avoid "tails"
                    }

                    // Mouse events
                    canvas.addEventListener('mousedown', e => startDraw(e.offsetX, e.offsetY));
                    canvas.addEventListener('mousemove', e => drawLine(e.offsetX, e.offsetY));
                    canvas.addEventListener('mouseup', stopDraw);
                    canvas.addEventListener('mouseleave', stopDraw);

                    // Touch events
                    canvas.addEventListener('touchstart', e => {
                        e.preventDefault();
                        let rect = canvas.getBoundingClientRect();
                        let touch = e.touches[0];
                        startDraw(touch.clientX - rect.left, touch.clientY - rect.top);
                    });
                    canvas.addEventListener('touchmove', e => {
                        e.preventDefault();
                        let rect = canvas.getBoundingClientRect();
                        let touch = e.touches[0];
                        drawLine(touch.clientX - rect.left, touch.clientY - rect.top);
                    });
                    canvas.addEventListener('touchend', stopDraw);

                    function clearPad() {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                    }

                    document.querySelector("form").addEventListener("submit", function (e) {
                        document.getElementById("signature").value = canvas.toDataURL();
                    });
                </script>
                <script>
                    document.querySelector("form").addEventListener("submit", function (e) {
                        let canvas = document.getElementById("signature-pad");
                        let signatureInput = document.getElementById("signature");
                        let errorMsg = document.getElementById("signature-error");

                        // Save signature data
                        let dataURL = canvas.toDataURL();
                        signatureInput.value = dataURL;

                        // Check if canvas is blank
                        if (isCanvasBlank(canvas)) {
                            e.preventDefault(); // stop form submission
                            errorMsg.style.display = "block"; // show error
                        } else {
                            errorMsg.style.display = "none"; // hide error if valid
                        }
                    });

                    // Function to check if canvas is blank
                    function isCanvasBlank(canvas) {
                        const blank = document.createElement('canvas');
                        blank.width = canvas.width;
                        blank.height = canvas.height;
                        return canvas.toDataURL() === blank.toDataURL();
                    }
                </script>
                <script>
                    document.querySelector("form").addEventListener("submit", function (e) {
                        let email = document.getElementById("email").value.trim();
                        let telephone = document.getElementById("telephone").value.trim();
                        let errorMsg = document.getElementById("contact-error");

                        // Check if both fields are empty
                        if (email === "" && telephone === "") {
                            e.preventDefault();
                            errorMsg.style.display = "block"; // show error
                        } else {
                            errorMsg.style.display = "none"; // hide error
                        }
                    });
                </script>
          
                </script>



                
</div>
</body>

</html>